
import React from 'react';
import { X, Shield, FileText, Accessibility, Truck, Info, PhoneCall } from 'lucide-react';
import { STORE_CONFIG } from '../store.config';

interface InfoModalProps {
  type: string | null;
  isOpen: boolean;
  onClose: () => void;
  darkMode: boolean;
}

export const InfoModal: React.FC<InfoModalProps> = ({ type, isOpen, onClose, darkMode }) => {
  if (!type) return null;

  const content = {
    terms: {
      title: "תקנון ותנאי שימוש מלאים_",
      icon: <FileText className="w-6 h-6 text-orange-600" />,
      text: `תקנון ותנאי שימוש - ${STORE_CONFIG.domain}

1. כללי
1.1 תקנון זה מסדיר את התנאים וההגבלות לשימוש באתר ${STORE_CONFIG.domain} (להלן: “האתר”), המופעל על ידי ${STORE_CONFIG.name} (ח.פ/עוסק: ${STORE_CONFIG.idNumber}) (להלן: “החברה”, “אנו” או “אנחנו”).
1.3 השימוש באתר, רכישת מוצרים או שימוש בשירותי Carvo AI מהווים הסכמה מלאה ובלתי מסויגת לתנאי תקנון זה. אם אינך מסכים לתנאים אלה, נא להימנע משימוש באתר.
1.4 החברה שומרת לעצמה את הזכות לעדכן ולשנות תקנון זה מעת לעת. השימוש המתמשך באתר לאחר ביצוע שינויים מהווה הסכמה לתנאים המעודכנת.
1.5 הרכישה באתר מותרת אך ורק ללקוחות שגילם 18 ומעלה. בעת ביצוע רכישה, המשתמש מצהיר כי הוא מעל גיל זה.
1.6 מדיניות ביטול עסקה הינה בהתאם לחוק הגנת הצרכן (עד 14 יום מיום קבלת המוצר), כמפורט בסעיף 7 לתקנון זה.

2. הגדרות
2.1 “לקוח” או “משתמש” – כל אדם המבצע רכישה, גולש באתר או משתמש בשירותי Carvo.
2.2 “מוצר” – כל פריט המוצע למכירה באתר, לרבות ציוד לרכב, אביזרי בטיחות, מוצרי חשמל, ציוד חילוץ ומוצרים נלווים.
2.3 “עסקה מקוונת” – כל הזמנה שבוצעה דרך האתר באמצעות מערכת ההזמנות המקוונת.
2.4 “Carvo AI” או “הבוט” – כלי בינה מלאכותית המסופק על ידי החברה לצורך מתן הכוונה והמלצות במצבי חירום ברכב.

3. תיאור המוצרים והמחירים
3.1 החברה עושה מאמצים לתאר את המוצרים באתר בצורה מדויקת ככל האפשר. עם זאת, ייתכנו הבדלים קלים בין התיאור, התמונות והמוצר בפועל.
3.2 המחירים באתר מצוינים בשקלים חדשים (₪) וכוללים מע”מ כחוק.
3.3 החברה שומרת לעצמה את הזכות לשנות מחירים, להפסיק מכירת מוצרים או לעדכן מבצעים בכל עת.
3.4 במקרה של טעות במחירון, החברה רשאית לבטל הזמנה או להציע ללקוח את המחיר המתוקן. הלקוח רשאי לבטל ולקבל החזר מלא.

4. ביצוע הזמנה
4.1 לצורך ביצוע הזמנה, הלקוח נדרש למלא פרטים: שם מלא, כתובת למשלוח, מספר טלפון וכתובת דוא”ל.
4.2 הלקוח מצהיר כי הפרטים שמסר נכונים ומלאים. החברה לא תישא באחריות לעיכובים הנובעים ממסירת פרטים שגויים.
4.3 ביצוע הזמנה מהווה הצעה לרכישה. אישור תשלום אינו מהווה התחייבות סופית לאספקה.
4.4 החברה רשאית לסרב או לבטל הזמנה במקרים של: חשד להונאה, חוסר זמינות, כתובת לא תקינה, או אי-עמידה בתקנון.
4.5 החברה תתחיל לקבל הזמנות רק לאחר השלמת הליכי רישום משפטיים.

5. תשלום וסליקה
5.1 התשלום באתר מתבצע באמצעות כרטיסי אשראי, PayPal ואמצעי תשלום מקוונים נוספים באמצעות ספקי סליקה מורשים.
5.2 כל התשלומים מאובטחים ומוצפנים (SSL/TLS).
5.3 החיוב בכרטיס האשראי יבוצע במועד אישור ההזמנה.
5.4 החברה אינה שומרת פרטי כרטיס אשראי. פרטי התשלום מועברים לספק הסליקה בלבד (תקן PCI-DSS).
5.5 במקרה של דחיית תשלום, החברה תפנה ללקוח להשלמת התשלום.

6. משלוחים
6.1 משלוח חינם בהזמנות מעל 200 ש"ח.
6.2 זמני אספקה משוערים: 7-14 ימי עסקים. זמנים עשויים להשתנות בהתאם ל: מיקום, מצב ביטחוני, מזג אויר, עומסים, חגים וזמינות.
6.3 החברה תעשה מאמץ לעמוד בזמנים אך אינה מתחייבת באופן מוחלט.
6.4 עיכובים אינם עילה לביטול או פיצויים, למעט עיכוב העולה על 45 יום ללא סיבה סבירה.
6.5 המשלוח לכתובת שנמסרה. הלקוח אחראי לוודא נגישות ולתאם קבלה.

7. ביטול עסקה והחזרת מוצרים
7.1 בהתאם לחוק הגנת הצרכן: ביטול תוך 14 ימים מקבלת המוצר, ללא נימוק.
7.2 ביטול באמצעות: ${STORE_CONFIG.email.support}
7.3 תנאים להחזרה: מוצר לא בשימוש, באריזה מקורית, לא ניזוק באשמת הלקוח.
7.4 החזר כספי: לאמצעי התשלום המקורי, תוך 14 ימי עסקים מקבלת המוצר המוחזר. ניתן לנכות עד 5% או 100 ₪ (הנמוך מביניהם).
7.5 עלויות משלוח: החזרה מרצון על חשבון הלקוח. מוצר פגום/שגוי על חשבון החברה.

8. אחריות על מוצרים
8.1 כל המוצרים עומדים בתקנים בינלאומיים ומאושרים לשימוש בטוח.
8.2 מוצרי חשמל עומדים בתקני בטיחות (CE, FCC וכדומה).
8.3 על מוצרים חלה אחריות יצרן. החברה אינה מספקת אחריות נוספת אלא במפורש.
8.4 הגבלת אחריות: אין אחריות לנזקים עקיפים או תוצאתיים. אחריות מרבית: שווי המוצר.

20. שימוש ב-Carvo AI
20.1 תיאור השירות: Carvo AI הוא כלי בינה מלאכותית המסופק לצורך מתן הכוונה כללית. הוא אינו מהווה תחליף לשירותים מקצועיים.
20.3 תנאים והגבלות: השימוש הוא על אחריות המשתמש בלבד. המידע הוא כללי ואינו מהווה הנחיה טכנית מחייבת.
20.4 אי-החלפת שירותים מקצועיים: Carvo AI אינו מחליף שירותי גרירה, חילוץ, מוקדי חירום (100, 101, 102) או מכונאי מוסמך.
20.5 הגבלת אחריות: החברה אינה אחראית לנזקים, תאונות או פציעות כתוצאה מהסתמכות על המידע מהבוט.
20.11 כתב ויתור: על ידי שימוש ב-Carvo AI, המשתמש מוותר על כל תביעה כלפי החברה בגין נזקים מהשימוש בשירות.

21. יצירת קשר
לכל שאלה, ניתן לפנות אלינו:
${STORE_CONFIG.name}
ח.פ / עוסק מורשה: ${STORE_CONFIG.idNumber}
כתובת: ${STORE_CONFIG.address}
דוא"ל: ${STORE_CONFIG.email.support} | ${STORE_CONFIG.email.legal}`
    },
    privacy: {
      title: "מדיניות פרטיות ואבטחת מידע מלאה_",
      icon: <Shield className="w-6 h-6 text-orange-600" />,
      text: `מדיניות פרטיות - ${STORE_CONFIG.domain}

1. כללי
1.1 ${STORE_CONFIG.name} (להלן: “החברה”, “אנו” או “אנחנו”) מכבדת את פרטיותך ומחויבת להגן על המידע האישי שלך.
1.2 מדיניות פרטיות זו מסבירה כיצד אנו אוספים, משתמשים, שומרים ומגנים על המידע האישי שלך כאשר אתה משתמש באתר ${STORE_CONFIG.domain} (להלן: “האתר”), רוכש מוצרים דרכו או משתמש בשירותי Carvo AI.
1.3 השימוש באתר מהווה הסכמה מלאה למדיניות פרטיות זו. אם אינך מסכים, נא להימנע משימוש באתר.

2. אילו נתונים אנו אוספים?
2.1 מידע אישי שאתה מספק לנו: שם מלא, כתובת דוא”ל, מספר טלפון, וכתובת למשלוח.
2.2 פרטי תשלום: החברה אינה אוספת או שומרת פרטי כרטיס אשראי. כל התשלומים מעובדים ישירות מול ספק הסליקה החיצוני העומד בתקן PCI-DSS. רק נתונים מינימליים (4 ספרות אחרונות, תוקף) עשויים להישמר לתיעוד חשבונאי בלבד.
2.3 מידע שנאסף באופן אוטומטי: כתובת IP, סוג דפדפן, דפים שצפית בהם, ומיקום גיאוגרפי כללי.
2.4 עוגיות (Cookies) ומעקב: עוגיות טכניות, Google Analytics, ופיקסלים ממפרסמים (Meta/Google Ads) לצורך רימרקטינג.

3. למה אנו משתמשים במידע שלך?
3.1 עיבוד הזמנות ואספקת שירות.
3.2 שיפור השירות והאתר (ניתוח דפוסי שימוש).
3.3 תקשורת שיווקית (בכפוף להסכמתך).
3.4 אבטחה ומניעת הונאות.
3.5 עמידה בחובות חוקיות.

4. עם מי אנו משתפים את המידע שלך?
4.1 ספקי שירות חיוניים: ספקי סליקה, חברות שילוח, וספקי אחסון ענן.
4.2 פלטפורמות פרסום ושיווק: Google Ads ו-Meta למטרות פרסום ממוקד בלבד.
4.3 רשויות חוקיות: במקרה של דרישה על פי חוק או צו שיפוטי.

5. כיצד אנו מגנים על המידע שלך?
5.1 אנו נוקטים באמצעי אבטחה טכניים וארגוניים, לרבות הצפנת SSL/TLS ואחסון מוצפן.
5.2 אנו לא שומרים פרטי כרטיס אשראי מלאים.
5.3 למרות מאמצינו, אין אבטחה מוחלטת באינטרנט.

6. כמה זמן אנו שומרים את המידע שלך?
6.1 נתוני הזמנות: נשמרים 7 שנים לפחות (דרישות מס).
6.2 נתוני שיווק: יימחקו לבקשתך או לאחר 5 שנים של חוסר פעילות.
6.3 לוגים טכניים: עד 12 חודשים.

7. מהן הזכויות שלך?
7.1 זכות עיון, תיקון, מחיקה (בכפוף לחוק), התנגדות לשיווק, והגבלת עיבוד.
7.6 למימוש זכויות פנה ל: ${STORE_CONFIG.email.legal}

8. עוגיות (Cookies)
8.1 קבצי טקסט המאוחסנים במכשירך.
8.2 אנו משתמשים בעוגיות טכניות (הכרחיות), אנליטיות ושיווקיות.
8.3 ניתן לנהל עוגיות דרך הגדרות הדפדפן.
8.4 בכניסה לאתר יוצג לך כלי לניהול עוגיות (Cookie Banner).

12. שימוש במידע שנאסף דרך Carvo AI
12.1 שיחות עם Carvo AI עשויות להישמר לשיפור השירות ואבטחה.
12.3 המידע ישמש לשיפור דיוק המערכת ועמידה בדרישות חוקיות.
12.5 ניתן לבקש מחיקת שיחות בפנייה ל: ${STORE_CONFIG.email.legal}

14. יצירת קשר
אם יש לך שאלות, נא ליצור קשר:
${STORE_CONFIG.name}
ח.פ / עוסק מורשה: ${STORE_CONFIG.idNumber}
כתובת: ${STORE_CONFIG.address}
דוא"ל: ${STORE_CONFIG.email.legal} | ${STORE_CONFIG.email.support}`
    },
    accessibility: {
      title: "הצהרת נגישות תקנית_",
      icon: <Accessibility className="w-6 h-6 text-orange-600" />,
      text: `הצהרת נגישות - ${STORE_CONFIG.name}

אנו פועלים ככל הניתן על מנת שהאתר יהיה נגיש לכלל האוכלוסייה, כולל אנשים עם מוגבלויות, מתוך אמונה כי לכל אדם מגיעה הזכות לחיות בשוויון, כבוד ונוחות.

1. רמת נגישות
1.1 האתר מונגש בהתאם לתקנות שוויון זכויות לאנשים עם מוגבלות (התאמות נגישות לשירות), התשע"ג-2013.
1.2 האתר עומד בהמלצות התקן הישראלי (ת"י 5568) ברמת AA.

2. התאמות שבוצעו
2.1 האתר מותאם לצפייה בדפדפנים מודרניים ובטלפונים ניידים.
2.2 ניתן לנווט באתר באמצעות המקלדת בלבד.
2.3 התאמה לקוראי מסך (Screen Readers) ותוספת טקסט חלופי לתמונות.
2.4 שימוש בצבעים בעלי ניגודיות גבוהה.

3. פניות בנושא נגישות
אם נתקלתם בקושי בנגישות או במידע שאינו נגיש, אנא פנו לרכז הנגישות שלנו:
אימייל: ${STORE_CONFIG.email.legal}
טלפון: ${STORE_CONFIG.phone}
אנו נטפל בפנייתכם בהקדם האפשרי.`
    },
    shipping: {
      title: "מדיניות משלוחים, ביטולים והחזרות_",
      icon: <Truck className="w-6 h-6 text-orange-600" />,
      text: `מדיניות משלוחים וביטול עסקה - CARVO

1. משלוחים ואספקה
1.1 משלוח חינם בהזמנות מעל 200 ש"ח.
1.2 זמן אספקה: 5–12 ימי עסקים בממוצע. יום עסקים נחשב ימי חול (א'-ה'), ולא כולל ערבי חג, חגים ושבתות.
1.3 חשוב: ייתכנו עיכובים חריגים עקב מצב ביטחוני או תנאי מזג אוויר חריגים. אנו פועלים עם חברות השילוח המובילות בישראל ועושים כל מאמץ לספק את ההזמנה בזמן הקצר ביותר.

2. ביטול עסקה ע"י הלקוח (חוק הגנת הצרכן)
2.1 לקוח רשאי לבטל עסקה בתוך 14 ימים מיום קבלת המוצר או מיום קבלת מסמך פרטי העסקה, המאוחר מביניהם.
2.2 הודעת ביטול תישלח בכתב לאימייל: ${STORE_CONFIG.email.support}.
2.3 דמי ביטול: בעת ביטול עסקה שלא עקב פגם או אי-התאמה, החברה תגבה מהלקוח דמי ביטול בשיעור של 5% ממחיר המוצר או 100 ש"ח, לפי הנמוך מביניהם.
2.4 על המוצר להיות מוחזר באריזתו המקורית, כשהוא שלם, ללא פגע ולא נעשה בו כל שימוש. עלות המשלוח חזרה תחול על הלקוח.

3. מוצר פגום או אי-התאמה
3.1 במקרה של קבלת מוצר פגום או מוצר השונה מהמוזמן, על הלקוח להודיע לחברה מיד עם הגילוי.
3.2 החברה תבדוק את התלונה ובמידת הצורך תדאג להחלפת המוצר או לביטול העסקה ללא גביית דמי ביטול ועל חשבון החברה.

4. החזר כספי
החזר כספי יבוצע בתוך 14 ימים ממועד קבלת הודעת הביטול והחזרת המוצר למחסני החברה, באותו אמצעי תשלום בו בוצעה העסקה.`
    }
  }[type] || { title: "מידע", icon: <Info className="w-6 h-6 text-orange-600" />, text: "" };

  return (
    <>
      <div
        className={`fixed inset-0 z-[300] transition-opacity duration-500 ${isOpen ? 'opacity-100 pointer-events-auto' : 'opacity-0 pointer-events-none'} bg-black/80 backdrop-blur-xl`}
        onClick={onClose}
      />

      <div className={`fixed inset-x-4 top-[8%] bottom-[8%] md:inset-x-auto md:left-1/2 md:-translate-x-1/2 md:w-[750px] z-[310] transition-all duration-500 transform ${isOpen ? 'opacity-100 scale-100 translate-y-0' : 'opacity-0 scale-95 translate-y-4'} 
        ${darkMode ? 'bg-[#0a0a0a] text-white' : 'bg-white text-black'} border border-white/10 rounded-[2.5rem] shadow-2xl flex flex-col text-right overflow-hidden`}>

        <div className="shrink-0 p-8 border-b border-white/5 flex justify-between items-center bg-white/[0.02]">
          <div className="flex items-center gap-4">
            {content.icon}
            <h2 className="text-xl md:text-2xl font-black italic tracking-tighter uppercase">{content.title}</h2>
          </div>
          <button onClick={onClose} className="p-2 hover:bg-white/5 rounded-full transition-colors">
            <X className="w-6 h-6" />
          </button>
        </div>

        <div className="flex-1 overflow-y-auto p-8 md:p-12 space-y-8 custom-scrollbar">
          <div className="space-y-6">
            <p className="text-[15px] md:text-base font-bold italic opacity-80 md:opacity-70 leading-relaxed whitespace-pre-wrap">
              {content.text}
            </p>
          </div>

          <div className="pt-8 border-t border-white/5 space-y-4">
            <h4 className="text-[13px] md:text-[10px] font-black uppercase text-orange-600 tracking-[0.2em]">צריך עזרה נוספת?_</h4>
            <div className="flex flex-wrap gap-4">
              <a href={`mailto:${STORE_CONFIG.email.support}`} className="flex items-center gap-2 text-[13px] md:text-[11px] font-black italic opacity-60 md:opacity-40 hover:opacity-100 transition-all">
                <PhoneCall className="w-4 h-4 md:w-3.5 md:h-3.5" />
                <span>מוקד תמיכה: {STORE_CONFIG.email.support}</span>
              </a>
            </div>
          </div>
        </div>

        <div className="shrink-0 p-6 border-t border-white/5 bg-black/40">
          <p className="text-[11px] md:text-[9px] font-black uppercase opacity-60 md:opacity-20 tracking-widest text-center">
            {STORE_CONFIG.name} SYSTEMS // LEGAL_DEPT_${STORE_CONFIG.year} // ISRAEL
          </p>
        </div>

        <style>{`
          .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
            display: block !important;
          }
          .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.02);
          }
          .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #ea580c;
            border-radius: 10px;
          }
        `}</style>
      </div>
    </>
  );
};
